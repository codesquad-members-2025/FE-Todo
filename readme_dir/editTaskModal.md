# tssk 모달 수정 기능 설계

## 흐름

- edit버튼에 클릭 이벤트 발생
- 이벤트가 발생한 카드의 노드를 가져온다.
- 이벤트가 발생한 카드의 title의 텍스트(".task-title), content의 텍스트(".task-content"), 카드의 id를 읽어온다.-> 읽어온 데이터는 컨트롤러의 속성으로 저장한다.(나중에 edit Modal에서 사용한다.)
- 해당하는 카드는 **숨김** 처리
- 타겟 카드 노드의 다음 형제 (.after(input 모달 입력) 사용)에 inputModal노드를 넣는다.
- 이때 속성으로 기억한 **title의 텍스트(".task-title), content의 텍스트(".task-content")**를 textarea의 자리에 넣어서 텍스트가 보이게 한다.

```javascript
<textarea class="modal__input content-input" placeholder="내용을 입력하세요">
  기존에 입력한 내용입니다!
</textarea>
```

- **저장** 버튼을 누르면 속성에 스토어의 id의 위치에 새로 입력한 데이터를 덮어씌운다.
- input모달을 삭제한다
- 가져온 이벤트가 발생한 노드의 text를 새로 입력 받은 텍스트로 변경한다.
- 숨겨진 타겟 모달을 보이게 한다.

- **취소** 버튼을 누르면 input모달을 삭제하고 숨긴 모달을 보이게 한다.

## edit 버튼 클릭시

### 핸들러

- edit버튼에 클릭 이벤트 발생시 컨트롤러의 수정메서드를 호출한다(button을 전달)

### 컨트롤러

- 컨트롤러에게 타겟 버튼을 전달하면서 카드변경 메서드를 호출한다.
- 입력받은 button의 부모요소로 올라가 카드 모달을 찾는다.(카드 노드를 속성으로 저장)
- 속성의 카드 노드의 ".task-title", ".task-content", 카드의 id를 읽어서 속성으로 저장한다.👏

### 컴포넌트

- ~~해당 카드를 숨긴다.~~ -> replace로 변경
- 속성의 id를 넣어서 input 모달을 담을 태그를 생성한다.
- input 모달 탬플릿에 입력값으로 ".task-title", ".task-content"를 넣어서 input 모달 문자열을 생성한다.
- 생성한 태그에 넣는다.
- 입력받은 노드의 다음 위치에 input모달 노드를 넣는다.

### 스토어

- 아직 수정이 완료되지 않았으므로 업데이트 하지 않는다.

## 완료 버튼 클릭시

### 핸들러

- 완료 버튼에 클릭 이벤트 발생시 똑같은 컨트롤러의 등록 메서드를 호출한다

### 컨트롤러

- 수정 컴포넌트의 수정 완료 메서드를 호출한다.
- 스토어의

### 컴포넌트

- 저장된 카드 노드의 ".task-title", ".task-content"영역을 텍스트를 속성의 값으로 수정한다.
- inoput 모달을 삭제한다.
- 숨겨진 카드 모달을 보이게 한다.

### 스토어

- id와 타이틀, 컨텐트를 입력받는다.
- 스토어에 접근해 업데이트 한다.

## 로그 관련

- 로그 생성시 타임 스탬프는 변형시 새로 생성한다
